<%- include('../partials/head.ejs', {cssSheet: "styles.css", title: "Editar Producto"}) %>
<%- include('../partials/header.ejs') %>

<main class="main-editarProducto">

    <h2 class="titulo-editarProducto">Editar Producto</h2>
    <ul id="mensajeErrores"></ul>

    <form action="/products/edit/<%= product.id %>?_method=PUT" method="POST" class="form-editarProducto" id="formularioEditarProducto">
        
        <div class="item-editarProducto"> 
            <label for="name">Nombre del Producto</label>
            <input type="text" id="name" name="name"  value="<%= product.name%>">
            <div class="text-danger">

                <% if (locals.errors && errors.name){ %>
                <%= errors.name.msg %>
                <% } %>    
                </div>
        </div>

        <div class="item-editarProducto">
            <label for="description">Descripcion del Producto</label>
            <input type="textarea" id="description" name="description"  value="<%= product.description%>">
            <div class="text-danger">

                <% if (locals.errors && errors.description){ %>
                <%= errors.description.msg %>
                <% } %>    
                </div>
        </div>

        <div class="item-editarProducto">
            <label for="imagenProducto">Imagen del Producto</label>
            <input type="file" id="image" name="imagenProducto"  value="<%= product.image%>">
            <div class="text-danger">

                <% if (locals.errors && errors.imagenProducto){ %>
                <%= errors.imagenProducto.msg %>
                <% } %>    
                </div>
        </div> 


        <div class="item-editarProducto">
            <label for="category_id">Categor√≠a de producto</label>
            <select id="category_id" name="category_id">
                <% categories.forEach(category => { %>
                    <option value="<%= category.id %>" <%= (product.category_id && product.category_id === category.id) ? 'selected' : '' %>> <%= category.name %> </option>
                <% }); %>
            </select>
            <div class="text-danger">

                <% if (locals.errors && errors.categories){ %>
                <%= errors.categories.msg %>
                <% } %>    
                </div>
        </div>
        


        <div class="item-editarProducto" id="colour-product-list">
            <label>Color del Producto</label>
            <% const selectedColourId = product.colour_id; %>
            <% colour.forEach(colour => { %>
                <input type="checkbox" id="colour" name="colours" value="<%= colour.id %>" class="checkbox-editarProducto" <% if (selectedColourId === colour.id) { %> checked <% } %>>
                <label for="colour_<%= colour.id %>" class="label-colorProducto"><%= colour.colour %></label>
            <% }) %>
            <div class="text-danger">

                <% if (locals.errors && errors.colours){ %>
                <%= errors.colours.msg %>
                <% } %>    
                </div>
        </div>
        
        
        
        
        <div class="item-editarProducto">
            <label for="price">Precio del Producto</label>
            <input type="text" id="price" name="price"  value="<%= product.price%>">
            <div class="text-danger">

                <% if (locals.errors && errors.price){ %>
                <%= errors.price.msg %>
                <% } %>    
                </div>
        </div>
        
        <button class="boton-editarProducto" type="submit">Editar</button>
    </form>
    
</main>

<script src="/js/editProduct.js"></script>

<%- include('../partials/footer.ejs') %>